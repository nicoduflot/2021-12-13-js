<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation Javascript initiation</title>
    <link rel="stylesheet" href="../css/bootstrap.css" />
    <script src="../js/bootstrap.bundle.js"></script>
    <link rel="stylesheet" href="../css/style.css" />
    <script>
        // avant es6 pour créer un tableau
        // var tableau = new Array('valeur', 1, 2, 3.4, true);
        // depuis es6
        //let cars = [];// crée une variable de type tableau vide
        let cars = ['Peugeot', 'Citroën', 'Ford', 'Renault'];
        console.log(cars);
        console.table(cars);
        console.log(cars[1]);
        console.log(`le tableau cars : ${cars} contient ${cars.length} élément(s)`);

        // les tableaux sont l'équivalents d'objets itérables
        let unNombre = 1;
        let unTexte = 'test';

        console.log(typeof unNombre);
        console.log(typeof unTexte);
        console.log(typeof cars);

        /* 
        les boucles servent a parcourir un tableau, 
        c'est à dire aller voir les éléménents qui y sont 
        contenu et s'arrêter selon des conditions
        */

        // for
        console.log('-------------- boucle for --------------');
        for (let i = 0; i < cars.length; i++) {
            console.log(`cars[${i}] : ${cars[i]} `);
        }

        // for in
        console.log('-------------- boucle for in --------------');
        for (let index in cars) {
            console.log(`cars[${index}] : ${cars[index]} `);
        }

        // le for in sert aussi à parcourir les élément d'un objet
        let obj = {
            nom: 'Duflot',
            prenom: 'Nicolas',
            presentation: function () {
                return `je m'appelle ${this.nom} `
            }
        };

        console.log(obj);
        console.log(obj.nom);
        console.log(obj.presentation());

        for (let key in obj) {
            console.log(obj[key]);
        }

        // for of es6
        console.log('-------------- boucle for in --------------');
        for (let value of cars) {
            console.log(`la valeur actuelle dans cars est : ${value} `);
        }

        console.log('---------- do while --------');
        let cpt = 0;
        do {
            console.log(cars[cpt]);
            cpt++;
        } while (cpt < cars.length)

        console.log('---------- while --------');
        cpt = 0;
        while (cpt < cars.length) {
            console.log(cars[cpt]);
            cpt++;
        }

        let tabNumber = [1, 2, 3];

        //forEach
        console.log('---------- forEach --------');
        tabNumber.forEach(function (value, index, tableau) {
            console.log(`valeur actuelle de tabNumber : ${value}, index actuel de tabNumber : ${index}, tabNumber : ${tableau} `);
            tableau[index] = value * 10;
        });

        console.log(tabNumber);

        // es6 .entries()
        /*
        Vient du modèle objet : permet de parcourir et d'extraire les clefs et les valeurs
        d'un tableau sous forme de tableau pour chaque élément
        */

        console.log('---------- .entries() ------------');
        for (let entry of cars.entries()) {
            console.log(entry);
            console.log(entry[0]);
            console.log(entry[1]);
        }

        // ajouter un élément dans un tableau
        cars[cars.length] = 'Hyundai';
        //
        //cars[8] = 'Papamobile'; // jamais dangereux

        cars.push('Seat');
        cars.push('Fiat', 'Toyota');

        console.log(cars);

        // supprimer des éléments du tableau
        // .pop(), .shift(), .splice()

        // .pop() => extrait la dernière valeur du tableau
        let extractLast = cars.pop();
        console.log(cars);
        console.log(extractLast);

        // .shif() => extrait la première valeur du tableau et réordone les index
        let extractFirst = cars.shift();
        console.log(cars);
        console.log(extractFirst);

        // splice permet plus que simplement supprimer des valeurs
        // .splice() 1 : extraire des valeurs du tableau( retourne un tableau)
        let removed = cars.splice(cars.indexOf('Ford'), 2);
        console.log(cars);
        console.log(removed);

        // .splice() 2 : remplacer des valeur dans un tableau (retourne un tableau)
        let replaced = cars.splice(cars.indexOf('Citroën'), 2, 'Alpine', 'Mazda', 'Tesla');
        console.log(cars);
        console.log(replaced);

        // .splice() 3 : injecter des valeurs dans le tableau
        cars.splice(cars.indexOf('Mazda'), 0, removed[0], removed[1], replaced[0], replaced[1], extractFirst, extractLast);
        console.log(cars);

        // faire la copie d'un tableau
        /*
        let carsClone = cars;

        carsClone.pop(); // <=> cars.pop()
        */

        // .slice();
        let carsClone = cars.slice();
        carsClone.pop();
        console.log(cars);
        console.log(carsClone);

        // trier les valeurs d'un tableau dansl'ordre croissant
        carsClone.sort();
        console.log(carsClone);

        // trier les valeurs d'un tableau dansl'ordre décroissant
        carsClone.reverse();
        console.log(carsClone);

        carsTest = [['Fiat', 1956], ['Kyia', 1995], ['Kyia', 1990], ['Ford', 1950]];
        console.table(carsTest);
        carsTest.sort();
        console.table(carsTest);

        // les tableaux à 2 dimension n'existent pas vraiment en JS
        let tab2d = [['a', 'b', 'c'], [12, 13, 14, 15], [10, 23, 56, 4]];
        console.table(tab2d);

        console.log('------- parcourir tab2d ------------');
        for (let i = 0; i < tab2d.length; i++) {
            console.log(tab2d[i]);
            for (let j = 0; j < tab2d[i].length; j++) {
                console.log(tab2d[i][j]);
            }
        }

        console.log('------- parcourir tab2d avec for of ------------');
        for (let value of tab2d) {
            console.log(value);
            for (let subValue of value) {
                console.log(subValue);
            }
        }

        // recherche d'éléments avec :

        // .find() => retourne la PREMIERE occurence qui correspond à la condition
        console.log('-------- .find() ---------');
        let arrayNum = [5, 8, 12, 130, 3, 44];
        let found = arrayNum.find(function (element) {
            return 20 < element;
        });

        console.log(found);

        // filtre sur les tableaux
        /*
        let filtered = arrayNum.filter( function(element){
            return 5 < element;
        });
        */
        //opérateur arrow 
        let filtered = arrayNum.filter(element => 5 < element);

        console.log(filtered);

        // attention aux conséquences en utilisant l'opérateur arrow

        let objet = {
            numbers: [1, 2, 56, 4, 123],
            pourChaque: function(){
                for(let i = 0; i < this.numbers.length; i++){
                    console.log(` dans le for, this : ${this}, this.numbers : ${this.numbers}`);
                }
                let _this = this;
                this.numbers.forEach(function(value){
                    console.log(` dans le forEach, this : ${this}, value : ${value}, this.numbers: ${this.numbers}`);
                    console.log(` dans le forEach, _this : ${_this}, value : ${value}, _this.numbers: ${_this.numbers}`);
                });
            },
            pourChaqueBis: function(){
                this.numbers.forEach(value => {
                    console.log(` dans le forEach, this : ${this}, value : ${value}, this.numbers: ${this.numbers}`);
                });
            }
        };

        objet.pourChaque();
        objet.pourChaqueBis();

        // .map()
        let numbers = [1, 2, 56, 4, 123];
        let newNumbers = numbers.map(function(value, index, myArray){
            return value*10;
        });

        console.log(numbers);
        console.log(newNumbers);

        /*
        Exercice : Tri à bulle  
        Etape 1 :  créer un tableau de 10 élément remplie de nombres
        aléatoires entre 1 et 100
        Etape 2 : Trier ces éléments du plus petit au plus grand sans utiliser
        les méthodes des tableau
        */

        // les nombre aléatoire : Math.random() => renvoir un flottant compris entre ]0, 1[
        console.log(Math.random());
        // random entre 0 et 5 flottant compris
        console.log(Math.random()*5);
        // random entre [1 et 5]
        console.log(Math.floor(Math.random()*5) + 1);
        // random entre [1 et 100]
        console.log(Math.floor( Math.random() * 100 +1 ));

        // créer le tableau nombres
        let nombres = []; // on crée le tableau nombres
        //remplie le tableau : 10 éléments entre 1 et 100
        for(let i = 0; i < 10; i++){
            nombres[i] = ( Math.floor( Math.random() * 100 +1 ) );
        }

        console.log(nombres);

        // trier le tableau
        for(let i = 0; i < nombres.length; i++){
            for(let j = i+1; j < nombres.length; j++){
                if(nombres[i] > nombres[j]){
                    let tampon = nombres[i];
                    nombres[i] = nombres[j];
                    nombres[j] = tampon;
                }
            }
        }

        console.log(nombres);

    </script>
</head>

<body>
    <header class="bg-light text-center">
        <h1>Formation Javascript - inititation</h1>
    </header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="https://github.com/nicoduflot" target="_blank">Github Nicolas</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
                aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="../">Accueil</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Introduction
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <li><a class="dropdown-item" href="../introduction/index.html">Introduction</a></li>
                            <li><a class="dropdown-item" href="../introduction/tableau.html">Tableaux</a></li>
                            <li><a class="dropdown-item" href="../introduction/fonction.html">Les fonctions</a></li>
                            <li><a class="dropdown-item" href="../introduction/destructuration.html">La
                                    destructuration</a></li>
                            <li><a class="dropdown-item" href="../introduction/storage.html">Storage</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Interractions DOM
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <li><a class="dropdown-item" href="../dom/index.html">Introduction</a></li>
                            <li><a class="dropdown-item" href="../dom/dom.html">Créer dans le DOM</a></li>
                            <li><a class="dropdown-item" href="../dom/css.html">DOM et CSS</a></li>
                            <li><a class="dropdown-item" href="../dom/dataset.html">Les dataset</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            AJAX
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <li><a class="dropdown-item" href="../ajax/index.html">Introduction</a></li>
                            <li><a class="dropdown-item" href="../ajax/promesse.html">Promesse</a></li>
                            <li><a class="dropdown-item" href="../ajax/bdd.html">JSON Bdd</a></li>
                            <li><a class="dropdown-item" href="../ajax/fetch.html">fetch</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main class="container">
        <section class="row">
            <article class="col-sm-12">
                <header>
                    <h2>Les tableaux</h2>
                </header>
                <main>
                    <p>
                        Tout est dans la console
                    </p>
                </main>
                <footer class="text-center">
                    <a href="../introduction/tableau.html">
                        <button class="btn btn-primary">
                            Aller à la page
                        </button>
                    </a>
                </footer>
            </article>
        </section>
    </main>
    <footer class="bg-light text-center">
        &copy; Dawan 2021-12
    </footer>
</body>

</html>